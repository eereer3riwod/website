<!DOCTYPE html>
<html>
<head>
    <title>Lumina License Verification</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <style>
        body { background: #111; color: white; font-family: sans-serif; text-align: center; padding-top: 50px; }
        .box { background: #222; padding: 20px; border-radius: 10px; display: inline-block; width: 300px; }
        input { padding: 10px; width: 80%; margin-bottom: 10px; border-radius: 5px; border: none; }
        button { padding: 10px 20px; background: #00a2ff; border: none; color: white; border-radius: 5px; cursor: pointer; }
        #status { margin-top: 20px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="box">
        <h1>Lumina</h1>
        <input type="text" id="rbxId" placeholder="Enter Roblox ID">
        <button onclick="check()">Check License</button>
        <div id="status"></div>
    </div>

    <script>
        // 1. YOUR FIREBASE CONFIG
        const firebaseConfig = { databaseURL: "https://linina-default-rtdb.firebaseio.com/" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        async function check() {
            const id = document.getElementById('rbxId').value.trim();
            const status = document.getElementById('status');

            // This line stops the 400 error by preventing blank requests
            if (!id || isNaN(id)) { return status.innerText = "❌ Enter a valid ID"; }

            status.innerText = "Checking...";
            try {
                // Check RoProxy
                const res = await fetch(`https://users.roproxy.com/v1/users/${id}`);
                if (!res.ok) throw new Error();
                const data = await res.json();

                // Check Firebase
                db.ref('licenses/' + id).once('value', (snap) => {
                    if (snap.exists() && snap.val().licensed) {
                        status.innerHTML = `<span style="color:green">✅ Active for ${data.displayName}</span>`;
                    } else {
                        status.innerHTML = `<span style="color:red">❌ No License Found</span>`;
                    }
                });
            } catch (e) {
                status.innerText = "⚠️ Proxy Error. Try again.";
            }
        }
    </script>
</body>
</html>